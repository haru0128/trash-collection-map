<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta charset="UTF-8">
  <title>é«˜çŸ¥å¸‚ã‚´ãƒŸåé›†ãƒãƒƒãƒ—ï¼ˆãƒ—ãƒ©ã”ã¿è¿½åŠ ï¼‰</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    html, body { height: 100%; margin: 0; }
    #map { height: 100%; }

    .title {
      position: absolute; top: 10px; left: 50px; z-index: 1000;
      background: rgba(255,255,255,0.9); padding: 6px 12px;
      font-size: 16px; font-weight: bold; border-radius: 6px;
      box-shadow: 0 0 6px rgba(0,0,0,0.3);
    }

    .search-box {
      position: absolute; top: 50px; left: 50px; z-index: 1000;
      background: white; padding: 8px; border-radius: 4px;
      box-shadow: 0 0 6px rgba(0,0,0,0.3); font-size: 14px;
    }
    .search-box input { width: 160px; padding: 4px; }
  </style>
</head>
<body>

<div class="title">é«˜çŸ¥å¸‚ã‚´ãƒŸåé›†ãƒãƒƒãƒ—</div>

<div class="search-box">
  <strong>ç”ºåæ¤œç´¢</strong><br>
  <input type="text" id="searchInput" placeholder="ä¾‹ï¼šæ—­ç”º">
  <button id="searchBtn">æ¤œç´¢</button>
</div>

<div id="map"></div>

<script>
/* é«˜çŸ¥å¸‚åœ°å›³ */
const map = L.map('map').setView([33.56, 133.52], 11);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: 'Â© OpenStreetMap'
}).addTo(map);

/* ã‚¢ã‚¤ã‚³ãƒ³è‰²å®šç¾© */
const iconBase = "https://rawcdn.githack.com/pointhi/leaflet-color-markers/master/img/";
const shadow = "https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png";

const icons = {
  monThu: L.icon({ iconUrl: iconBase+"marker-icon-red.png",   shadowUrl: shadow, iconSize:[25,41], iconAnchor:[12,41], popupAnchor:[1,-34]}),
  tueFri: L.icon({ iconUrl: iconBase+"marker-icon-blue.png",  shadowUrl: shadow, iconSize:[25,41], iconAnchor:[12,41], popupAnchor:[1,-34]}),
  mountain: L.icon({ iconUrl: iconBase+"marker-icon-green.png",shadowUrl: shadow, iconSize:[25,41], iconAnchor:[12,41], popupAnchor:[1,-34]}),
  pla: L.icon({ iconUrl: iconBase+"marker-icon-yellow.png",shadowUrl: shadow, iconSize:[25,41], iconAnchor:[12,41], popupAnchor:[1,-34]})
};

/* ãƒ”ãƒ³ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚µãƒ³ãƒ—ãƒ«ãƒ»ãƒ—ãƒ©ç”¨ã‚‚è¿½åŠ ï¼‰ */
const points = [
  // èµ¤ï¼ˆmonThuï¼‰
  ["æœ¬ç”º","monThu",33.5599,133.5317],
  ["å¸¯å±‹ç”º","monThu",33.5607,133.5329],
  ["åŒ—ä¹…ä¿","monThu",33.5751,133.5376],
  ["å—ä¹…ä¿","monThu",33.5681,133.5421],
  ["æ¯”å³¶ç”º","monThu",33.5716,133.5274],

  // é’ï¼ˆtueFriï¼‰
  ["æœå€‰","tueFri",33.5485,133.4867],
  ["é´¨éƒ¨","tueFri",33.5466,133.5073],
  ["ç¥ç”°","tueFri",33.5388,133.5217],
  ["æ½®æ±Ÿ","tueFri",33.5404,133.5284],
  ["ä»äº•ç”°","tueFri",33.4978,133.5669],

  // ç·‘ï¼ˆå±±é–“éƒ¨ï¼‰
  ["é¡ä»Šäº•","mountain",33.6246,133.4703],
  ["åœŸä½å±±æ¡‘å°¾","mountain",33.6468,133.4112],
  ["æ˜¥é‡ç”ºå¼˜å²¡","mountain",33.4812,133.4637],
  ["é¡ä¸­è°·","mountain",33.6180,133.4800],
  ["åœŸä½å±±é«˜å·","mountain",33.6420,133.4200],

  // ğŸŸ¡ ãƒ—ãƒ©ã”ã¿ï¼ˆå…¨åœ°åŒºãƒ»æ°´æ›œæ—¥ï¼‰
  ["é«˜çŸ¥å¸‚ä¸­å¿ƒã‚¨ãƒªã‚¢","pla",33.5600,133.5300],
  ["æ½®æ±Ÿãƒ—ãƒ©ã”ã¿åœ°ç‚¹","pla",33.5404,133.5284],
  ["æ—­ç”ºãƒ—ãƒ©ã”ã¿åœ°ç‚¹","pla",33.5568,133.5141],
  ["æ˜¥é‡ãƒ—ãƒ©ã”ã¿åœ°ç‚¹","pla",33.4812,133.4637],
  ["åœŸä½å±±ãƒ—ãƒ©ã”ã¿åœ°ç‚¹","pla",33.6468,133.4112]
];

/* ãƒãƒ¼ã‚«ãƒ¼ç”Ÿæˆ */
const markers = [];
points.forEach(p => {
  const marker = L.marker([p[2], p[3]], { icon: icons[p[1]] }).addTo(map);

  let label;
  if (p[1] === "monThu") label="å¯ç‡ƒã”ã¿ï¼ˆæœˆãƒ»æœ¨ï¼‰";
  if (p[1] === "tueFri") label="å¯ç‡ƒã”ã¿ï¼ˆç«ãƒ»é‡‘ï¼‰";
  if (p[1] === "mountain") label="å±±é–“éƒ¨ï¼ˆåé›†æ³¨æ„ï¼‰";
  if (p[1] === "pla") label="ãƒ—ãƒ©ã”ã¿ï¼ˆæ°´æ›œæ—¥ï¼‰";  // â† è¿½åŠ 

  marker.bindPopup(`<strong>${p[0]}</strong><br>${label}`);
  markers.push({ name: p[0], marker });
});

/* ç”ºåæ¤œç´¢ */
function searchTown() {
  let keyword = document.getElementById("searchInput").value.trim();
  if (!keyword) return;
  keyword = keyword.replace(/\s+/g, "");
  const hit = markers.find(m => m.name.replace(/\s+/g,"").includes(keyword));
  if (hit) {
    map.setView(hit.marker.getLatLng(), 15);
    hit.marker.openPopup();
  } else {
    alert("è©²å½“ã™ã‚‹ç”ºåãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
  }
}

document.getElementById("searchBtn").addEventListener("click", searchTown);
</script>

</body>
</html>
